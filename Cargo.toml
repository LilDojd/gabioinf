[package]
name = "gabioinf"
version = "0.1.0"
edition = "2021"
publish = false

[dependencies]
anyhow = "1.0.8"
thiserror = "1.0.63"
tracing = "0.1.40"
serde = { version = "1.0.204", features = ["derive"] }
serde_json = "1.0.120"
reqwest = { version = "0.12.5", features = ["json"] }
time = { version = "0.3.36", features = ["serde"] }
chrono = { version = "0.4.38", features = ["clock", "serde"] }
config = "0.14.0"
derive_more = "0.99.18"

# Backend
axum = { version = "0.7", features = ["multipart", "macros"], optional = true }
validator = { version = "0.18.1", features = ["derive"], optional = true }
tokio = { version = "1.39.1", features = ["full"], optional = true }
axum-extra = { version = "0.9.3", features = [
  "cookie-private",
  "typed-header",
], optional = true }
axum-macros = { version = "0.4.1", optional = true }
sqlx = { version = "0.7", features = [
  "chrono",
  "macros",
  "runtime-tokio-rustls",
], optional = true }
tower = { version = "0.4.13", optional = true, features = ["timeout"] }
tower-http = { version = "0.5.2", features = ["cors", "fs"], optional = true }
oauth2 = { version = "4.4.2", optional = true }
tracing-subscriber = { version = "0.3.18", optional = true }
rustrict = { version = "0.7.26", optional = true }
tower_governor = { version = "0.4.2", features = ["tracing"], optional = true }
tower-sessions = { version = "0.12.2", optional = true }
tower-sessions-sqlx-store = { version = "0.12", features = [
  "postgres",
], optional = true }
axum-login = { version = "0.15.3", optional = true }
axum-helmet = { version = "0.1.0", optional = true }

# Dioxus
dioxus = { version = "0.6.0-alpha.1", features = ["fullstack", "router"] }
dioxus-fullstack = { version = "0.6.0-alpha.1" }
tracing-wasm = { version = "0.2.1", optional = true }


# [dev-dependencies]
# axum-test = "15.3.0"
# once_cell = "1.19.0"

[features]
default = []
server = [
  "axum",
  "dioxus-fullstack/axum",
  "tokio",
  "axum-extra",
  "axum-macros",
  "sqlx",
  "tower",
  "tower-http",
  "oauth2",
  "tracing-subscriber",
  "rustrict",
  "tower_governor",
  "tower-sessions",
  "tower-sessions-sqlx-store",
  "axum-login",
  "axum-helmet",
  "validator",
]
web = ["tracing-wasm", "dioxus/web"]
